!function(a){function b(b){var c=a('<span class="dcn-div-html" style="display:none;"></span>').appendTo(a(b));return c}function c(b){var h,i,j,c=a.data(b,"dcndiv").options,g=a(b);c&&(h=a('<span class="dcn-div-text" style="margin-right:5px;"></span>'),i=a('<span class="dcn-div-html" style="display:none;margin-right:5px;"></span>'),j=a('<span class="dcn-div-btn-edit" style="display:none;"></span>'),g.children().appendTo(i),""!=c.text&&h.html(c.text),g.html(""),h.appendTo(g),i.appendTo(g),j.appendTo(g),f(b,c.value),e(b,c.text),d(b),c.onLoadSuccess.call(b))}function d(b){var e,c=a.data(b,"dcndiv").options,d=a(b);c&&d&&(e=d.find("span.dcn-div-btn-edit"),e.length>0&&(e.empty(),a.each(c.editButtons,function(){var c,b=this.type||1;switch(parseInt(b)){case 1:c=a('<a href="javascript:void(0)"></a> ').appendTo(e),c.linkbutton(this),this.onClick&&c.bind("click",this.onClick),this.btnCls&&c.addClass(this.btnCls),this.title&&c.attr("title",this.title);break;case 2:c=a('<a href="javascript:void(0)" class="dcn-clearbutton"></a>').appendTo(e),this.targetID||(this.targetID=d),c.clearbutton(this);break;case 3:c=a('<a href="javascript:void(0)" hcode="'+this.hcode+'"></a> ').appendTo(e),c.linkbutton({plain:!0}),c.addClass("dc-help"),setHelp(c)}}),a.parser.parse(e)))}function e(b,c){var f,d=a.data(b,"dcndiv").options,e=a(b);if(d&&e){d.text=c,f=e.find("span.dcn-div-text"),0==f.length&&(f=a('<span class="dcn-div-text"></span>').appendTo(a(b)));try{a(d.text).length>0&&a(d.text).children().length>0&&/<(!|\/)?(.|\n)*?>/i.test(d.text)?a(d.formatter.call(b,d.text)).appendTo(f):f.html(d.formatter.call(b,d.text))}catch(g){f.html(d.formatter.call(b,d.text))}a.data(b,"dcndiv").options=d}}function f(b,c){var f,d=a.data(b,"dcndiv").options,e=a(b);d&&e&&(d.value=c,f=e.find("input.dcn-div-value"),0==f.length&&(f=a('<input type="hidden" class="dcn-div-value" />').appendTo(e)),f.attr("name",d.valueField).val(c),a.data(b,"dcndiv").options=d)}function g(c){var g,h,i,d=a.data(c,"dcndiv").options,f=a(c);d&&f&&d.onBeforeEdit.call(c)&&(g=f.find("span.dcn-div-text"),h=f.find("span.dcn-div-html"),i=f.find("span.dcn-div-btn-edit"),0==g.length&&e(c,d.text),0==h.length&&(h=b(c)),h.children().length>0&&(g.css("display","none"),h.css("display","")),i.length>0&&i.css("display",""),d.oldText=d.text,d.oldValue=d.value,d.onBeginEdit.call(c))}function h(a,b){i(a),void 0!=b&&e(a,b)}function i(c){var h,i,j,d=a.data(c,"dcndiv").options,g=a(c);d&&g&&(f(c,d.oldValue),e(c,d.oldText),h=g.find("span.dcn-div-text"),i=g.find("span.dcn-div-html"),j=g.find("span.dcn-div-btn-edit"),0==i.length&&(i=b(c)),h.css("display",""),i.css("display","none"),j.length>0&&j.css("display","none"),d.onCancelEdit.call(c),d.onAfterEdit.call(c))}a.fn.dcndiv=function(b,g){return"string"==typeof b?a.fn.dcndiv.methods[b](this,g):(b=b||{},this.each(function(){var g=a.data(this,"dcndiv");g?(a.extend(g.options,b),f(this,g.options.value),e(this,g.options.text),d(this)):(a.data(this,"dcndiv",{options:a.extend({},a.fn.dcndiv.defaults,a.fn.dcndiv.parseOptions(this),b)}),c(this))}))},a.fn.dcndiv.methods={options:function(b){return a.data(b[0],"dcndiv").options},beginEdit:function(a){return a.each(function(){g(this)})},endEdit:function(a,b){return a.each(function(){h(this,b)})},cancelEdit:function(a){return a.each(function(){i(this)})},setHtml:function(b,c){return b.each(function(){var b=a(this).find(".dcn-div-html");b.length>0&&b.html(c)})},getText:function(b){var c=a.data(b[0],"dcndiv").options;return c?c.text:""},setText:function(a,b){return a.each(function(){e(this,b)})},getValue:function(b){var c=a.data(b[0],"dcndiv").options;return c?c.value:""},setValue:function(a,b){return a.each(function(){f(this,b)})},load:function(b,c){return b.each(function(){f(this,""),e(this,"");var b=a.data(this,"dcndiv").options;b&&void 0!=c&&(b.valueField&&void 0!=c[b.valueField]&&f(this,c[b.valueField]),b.textField&&void 0!=c[b.textField]&&e(this,c[b.textField]))})},editButtonsShow:function(b){return b.each(function(){var b=a(this).find("span.dcn-div-btn-edit");b.length>0&&b.show()})},editButtonsHide:function(b){return b.each(function(){var b=a(this).find("span.dcn-div-btn-edit");b.length>0&&b.hide()})}},a.fn.dcndiv.parseOptions=function(b){var c=a(b);return a.extend({},a.parser.parseOptions(b,["text","value","textField","valueField"]),{textField:c.attr("textField")||c.attr("name")})},a.fn.dcndiv.defaults={text:"",value:"",textField:"",valueField:"",onLoadSuccess:function(){},onBeforeEdit:function(){return!0},onBeginEdit:function(){},onEndEdit:function(){},onCancelEdit:function(){},onAfterEdit:function(){},formatter:function(a){return a},editButtons:[]},a(".dcn-div").dcndiv()}(jQuery);